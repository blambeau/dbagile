start_transaction
  (define :example, {:id => Integer, :name => String})
  (insert :example, [
    {:id => 1, :name => "dbagile"},
    {:id => 2, :name => "sequel"}
  ])

  (delete :example, {:id => 1})
  (assert "Only one tuple remaining",
    (equal? [{:id => 2, :name => "sequel"}],
            (to_a :example)))
          
  (delete :example)
  (assert "No tuple remaining",
    (empty? :example))
commit